(function(){var D=YAHOO,B=D.util,A=D.lang,C;if(!B.Storage){C=function(E){D.log("Exception in YAHOO.util.Storage.?? - must be extended by a storage engine".replace("??",E).replace("??",this.getName?this.getName():"Unknown"),"error");};B.Storage=function(E,G,F){var H=this;D.env._id_counter+=1;H._cfg=A.isObject(F)?F:{};H._location=E;H._name=G;H.isReady=false;H.createEvent(H.CE_READY,{scope:H});H.createEvent(H.CE_CHANGE,{scope:H});H.subscribe(H.CE_READY,function(){H.isReady=true;});};B.Storage.prototype={CE_READY:"YUIStorageReady",CE_CHANGE:"YUIStorageChange",DELIMITER:"__",_cfg:"",_name:"",_location:"",length:0,isReady:false,clear:function(){this._clear();this.length=0;},getItem:function(E){D.log("Fetching item at  "+E);var F=this._getItem(E);return A.isValue(F)?this._getValue(F):null;},getName:function(){return this._name;},hasKey:function(E){return A.isString(E)&&this._hasKey(E);},key:function(E){D.log("Fetching key at "+E);if(A.isNumber(E)&&-1<E&&this.length>E){var F=this._key(E);if(F){return F;}}throw ("INDEX_SIZE_ERR - Storage.setItem - The provided index ("+E+") is not available");},removeItem:function(F){D.log("removing "+F);if(this.hasKey(F)){var E=this._getItem(F);if(!E){E=null;}this._removeItem(F);this.fireEvent(this.CE_CHANGE,new B.StorageEvent(this,F,E,null,B.StorageEvent.TYPE_REMOVE_ITEM));}else{}},setItem:function(G,H){D.log("SETTING "+H+" to "+G);if(A.isString(G)){var F=this.hasKey(G)?B.StorageEvent.TYPE_UPDATE_ITEM:B.StorageEvent.TYPE_ADD_ITEM,E=this._getItem(G);if(!E){E=null;}if(this._setItem(G,this._createValue(H))){this.fireEvent(this.CE_CHANGE,new B.StorageEvent(this,G,E,H,F));}else{throw ("QUOTA_EXCEEDED_ERROR - Storage.setItem - The choosen storage method ("+this.getName()+") has exceeded capacity");}}else{}},_clear:function(){C("_clear");return"";},_createValue:function(F){var E=(A.isNull(F)||A.isUndefined(F))?(""+F):typeof F;return"string"===E?F:E+this.DELIMITER+F;},_getItem:function(E){C("_getItem");return"";},_getValue:function(F){var E=F?F.split(this.DELIMITER):[];if(1==E.length){return F;}switch(E[0]){case"boolean":return"true"===E[1];case"number":return parseFloat(E[1]);case"null":return null;default:return E[1];}},_key:function(E){C("_key");return"";},_hasKey:function(E){return null!==this._getItem(E);},_removeItem:function(E){C("_removeItem");return"";},_setItem:function(E,F){C("_setItem");return"";}};A.augmentProto(B.Storage,B.EventProvider);}}());(function(){var G=YAHOO.util,B=YAHOO.lang,D={},F=[],E={},A=function(I,H,J){var K=D[I+H.ENGINE_NAME];if(!K){K=new H(I,J);D[I+H.ENGINE_NAME]=K;}return K;},C=function(H){switch(H){case G.StorageManager.LOCATION_LOCAL:case G.StorageManager.LOCATION_SESSION:return H;default:return G.StorageManager.LOCATION_SESSION;}};G.StorageManager={LOCATION_SESSION:"sessionStorage",LOCATION_LOCAL:"localStorage",get:function(N,I,L){var J=B.isObject(L)?L:{},H=E[N];if(!H&&!J.force){var M,K;if(J.order){K=J.order.length;for(M=0;M<K&&!H;M+=1){H=E[J.order[M]];}}if(!H){K=F.length;for(M=0;M<K&&!H;M+=1){H=F[M];}}}if(H){return A(C(I),H,J.engine);}throw ("YAHOO.util.StorageManager.get - No engine available, please include an engine before calling this function.");},getByteSize:function(H){return encodeURIComponent(""+H).length;},register:function(H){if(B.isFunction(H)&&B.isFunction(H.isAvailable)&&B.isString(H.ENGINE_NAME)&&H.isAvailable()){E[H.ENGINE_NAME]=H;F.push(H);return true;}return false;}};YAHOO.register("StorageManager",G.SWFStore,{version:"@VERSION@",build:"@BUILD@"});}());(function(){YAHOO.util.StorageEvent=function(D,B,A,E,C){this.key=B;this.oldValue=A;this.newValue=E;this.url=window.location.href;this.window=window;this.storageArea=D;this.type=C;};YAHOO.lang.augmentObject(YAHOO.util.StorageEvent,{TYPE_ADD_ITEM:"addItem",TYPE_REMOVE_ITEM:"removeItem",TYPE_UPDATE_ITEM:"updateItem"});YAHOO.util.StorageEvent.prototype={key:null,newValue:null,oldValue:null,source:null,storageArea:null,type:null,url:null};}());(function(){var B=YAHOO.util,A=YAHOO.lang;B.StorageEngineKeyed=function(){B.StorageEngineKeyed.superclass.constructor.apply(this,arguments);this._keys=[];this._keyMap={};};A.extend(B.StorageEngineKeyed,B.Storage,{_keys:null,_keyMap:null,_addKey:function(C){this._keyMap[C]=this.length;this._keys.push(C);this.length=this._keys.length;},_indexOfKey:function(D){var C=this._keyMap[D];return undefined===C?-1:C;},_removeKey:function(E){var D=this._indexOfKey(E),F=this._keys.slice(D+1);delete this._keyMap[E];for(var C in this._keyMap){if(D<this._keyMap[C]){this._keyMap[C]-=1;}}this._keys.length=D;this._keys=this._keys.concat(F);this.length=this._keys.length;}});}());(function(){var D=YAHOO.util,B=YAHOO.lang,A=function(E){if(E.begin){E.begin();}},C=function(E){if(E.commit){E.commit();}};D.StorageEngineHTML5=function(E,F){var G=this;D.StorageEngineHTML5.superclass.constructor.call(G,E,D.StorageEngineHTML5.ENGINE_NAME,F);G._engine=window[E];G.length=G._engine.length;B.later(250,G,function(){G.fireEvent(G.CE_READY);});};YAHOO.lang.extend(D.StorageEngineHTML5,D.Storage,{_engine:null,_clear:function(){var G=this;if(G._engine.clear){G._engine.clear();}else{for(var F=G.length,E;0<=F;F-=1){E=G._key(F);G._removeItem(E);}}},_getItem:function(E){var F=this._engine.getItem(E);return B.isObject(F)?F.value:F;},_key:function(E){return this._engine.key(E);},_removeItem:function(E){var F=this;A(F._engine);F._engine.removeItem(E);C(F._engine);F.length=F._engine.length;},_setItem:function(E,F){var H=this;try{A(H._engine);H._engine.setItem(E,F);C(H._engine);H.length=H._engine.length;return true;}catch(G){return false;}}},true);D.StorageEngineHTML5.ENGINE_NAME="html5";D.StorageEngineHTML5.isAvailable=function(){return window.localStorage;};D.StorageManager.register(D.StorageEngineHTML5);}());(function(){var C=window.google,I=YAHOO.util,B=YAHOO.lang,E=9948,D="YUIStorageEngine",H=null,F=encodeURIComponent,A=decodeURIComponent;I.StorageEngineGears=function(J,M){var P=this;I.StorageEngineGears.superclass.constructor.call(P,J,I.StorageEngineGears.ENGINE_NAME,M);if(!H){H=C.gears.factory.create(I.StorageEngineGears.GEARS);
H.open(window.location.host+"-"+I.StorageEngineGears.DATABASE);H.execute("CREATE TABLE IF NOT EXISTS "+D+" (key TEXT, location TEXT, value TEXT)");}var L=I.StorageManager.LOCATION_SESSION===P._location,G=I.Cookie.get("sessionKey"+I.StorageEngineGears.ENGINE_NAME);if(!G){H.execute("BEGIN");H.execute("DELETE FROM "+D+' WHERE location="'+F(I.StorageManager.LOCATION_SESSION)+'"');H.execute("COMMIT");}var K=H.execute("SELECT key FROM "+D+' WHERE location="'+F(P._location)+'"'),O={};try{while(K.isValidRow()){var N=A(K.field(0));if(!O[N]){O[N]=true;P._addKey(N);}K.next();}}finally{K.close();}if(L){I.Cookie.set("sessionKey"+I.StorageEngineGears.ENGINE_NAME,true);}P.length=P._keys.length;B.later(250,P,function(){P.fireEvent(P.CE_READY);});};B.extend(I.StorageEngineGears,I.StorageEngineKeyed,{_clear:function(){H.execute("BEGIN");H.execute("DELETE FROM "+D+' WHERE location="'+F(this._location)+'"');H.execute("COMMIT");this._keys=[];this.length=0;},_getItem:function(K){var J=H.execute("SELECT value FROM "+D+' WHERE key="'+F(K)+'" AND location="'+F(this._location)+'"'),L="";try{while(J.isValidRow()){var G=J.field(0);L+=J.field(0);J.next();}}finally{J.close();}return L?A(L):null;},_key:function(G){return this._keys[G];},_removeItem:function(G){H.execute("BEGIN");H.execute("DELETE FROM "+D+' WHERE key="'+F(G)+'" AND location="'+F(this._location)+'"');H.execute("COMMIT");this._removeKey(G);},_setItem:function(Q,N){if(!this.hasKey(Q)){this._addKey(Q);}var G=F(Q),R=F(this._location),S=F(N),L=[],P=E-(G+R).length;if(P<S.length){for(var O=0,M=S.length;O<M;O+=P){L.push(S.substr(O,P));}}else{L.push(S);}H.execute("BEGIN");H.execute("DELETE FROM "+D+' WHERE key="'+F(Q)+'" AND location="'+F(this._location)+'"');for(var K=0,J=L.length;K<J;K+=1){H.execute("INSERT INTO "+D+' VALUES ("'+G+'", "'+R+'", "'+L[K]+'")');}H.execute("COMMIT");return true;}});I.Event.on("unload",function(){if(H){H.close();}});I.StorageEngineGears.ENGINE_NAME="gears";I.StorageEngineGears.GEARS="beta.database";I.StorageEngineGears.DATABASE="yui.database";I.StorageEngineGears.isAvailable=function(){if(C&&C.gears){try{C.gears.factory.create(I.StorageEngineGears.GEARS);return true;}catch(G){}}return false;};I.StorageManager.register(I.StorageEngineGears);}());(function(){var G=YAHOO.util,B=YAHOO.lang,H=G.Dom,C=215,E=138,F=null,D=function(J,I){return J._location+J.DELIMITER+I;},A=function(J){if(!F){if(!B.isString(J.swfURL)){J.swfURL=G.StorageEngineSWF.SWFURL;}if(!J.containerID){var K=document.getElementsByTagName("body")[0],I=K.appendChild(document.createElement("div"));J.containerID=H.generateId(I);}if(!J.attributes){J.attributes={};}if(!J.attributes.flashVars){J.attributes.flashVars={};}J.attributes.flashVars.useCompression="true";F=new YAHOO.widget.SWF(J.containerID,J.swfURL,J.attributes);}};G.StorageEngineSWF=function(I,K){var L=this;G.StorageEngineSWF.superclass.constructor.call(L,I,G.StorageEngineSWF.ENGINE_NAME,K);A(L._cfg);var J=G.StorageManager.LOCATION_SESSION===L._location;F.addListener("contentReady",function(){L._swf=F._swf;F.initialized=true;var N=G.Cookie.get("sessionKey"+G.StorageEngineSWF.ENGINE_NAME);for(var P=F.callSWF("getLength",[])-1;0<=P;P-=1){var O=F.callSWF("getNameAt",[P]),M=-1<O.indexOf(G.StorageManager.LOCATION_SESSION+L.DELIMITER);if(J&&!N){F.callSWF("removeItem",[O]);}else{if(J===M){L._addKey(O);}}}if(J){G.Cookie.set("sessionKey"+G.StorageEngineSWF.ENGINE_NAME,true);}L.length=L._keys.length;L.fireEvent(L.CE_READY);});if(F.initialized){F.fireEvent("contentReady");}};B.extend(G.StorageEngineSWF,G.StorageEngineKeyed,{_swf:null,_clear:function(){for(var J=this._keys.length-1;0<=J;J-=1){var I=this._keys[J];F.callSWF("removeItem",[I]);}this._keys=[];this.length=0;},_getItem:function(I){var J=D(this,I);return F.callSWF("getValueOf",[J]);},_key:function(I){return(this._keys[I]||"").replace(/^.*?__/,"");},_removeItem:function(I){var J=D(this,I);F.callSWF("removeItem",[J]);this._removeKey(J);},_setItem:function(I,K){var J=D(this,I),L;if(!F.callSWF("getValueOf",[J])){this._addKey(J);}if(F.callSWF("setItem",[J,K])){return true;}else{L=H.get(F._id);if(C>H.getStyle(L,"width").replace(/\D+/g,"")){H.setStyle(L,"width",C+"px");}if(E>H.getStyle(L,"height").replace(/\D+/g,"")){H.setStyle(L,"height",E+"px");}return F.callSWF("displaySettings",[]);}}});G.StorageEngineSWF.SWFURL="swfstore.swf";G.StorageEngineSWF.ENGINE_NAME="swf";G.StorageEngineSWF.isAvailable=function(){return(6<=YAHOO.env.ua.flash&&YAHOO.widget.SWF);};G.StorageManager.register(G.StorageEngineSWF);}());YAHOO.register("storage",YAHOO.util.Storage,{version:"@VERSION@",build:"@BUILD@"});