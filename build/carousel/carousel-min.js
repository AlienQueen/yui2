(function(){var O;YAHOO.widget.Carousel=function(q,p){YAHOO.widget.Carousel.superclass.constructor.call(this,q,p);};var T=YAHOO.widget.Carousel,d=YAHOO.util.Dom,b=YAHOO.util.Event,n=YAHOO.lang;O="Carousel";var S={},F="afterScroll",e="allItemsRemoved",a="beforeHide",J="beforePageChange",h="beforeScroll",X="beforeShow",B="blur",W="focus",Z="hide",R="itemAdded",m="itemRemoved",P="itemReplaced",C="itemSelected",L="loadItems",I="navigationStateChange",f="pageChange",H="render",U="show",Y="startAutoPlay",o="stopAutoPlay",K="uiUpdate";function G(p,q){for(var r in q){d.setStyle(p,r,q[r]);}}function V(q,p){var r=document.createElement(q);p=p||{};if(p.className){d.addClass(r,p.className);}if(p.styles){G(r,p.styles);}if(p.parent){p.parent.appendChild(r);}if(p.id){r.setAttribute("id",p.id);}if(p.content){if(p.content.nodeName){r.appendChild(p.content);}else{r.innerHTML=p.content;}}return r;}function c(r,q,p){var t;if(!r){return 0;}function s(w,v){var x;if(v=="marginRight"&&YAHOO.env.ua.webkit){x=parseInt(d.getStyle(w,"marginLeft"),10);}else{x=parseInt(d.getStyle(w,v),10);}return n.isNumber(x)?x:0;}function u(w,v){var x;if(v=="marginRight"&&YAHOO.env.ua.webkit){x=parseFloat(d.getStyle(w,"marginLeft"));}else{x=parseFloat(d.getStyle(w,v));}return n.isNumber(x)?x:0;}if(typeof p=="undefined"){p="int";}switch(q){case"height":t=r.offsetHeight;if(t>0){t+=s(r,"marginTop")+s(r,"marginBottom");}else{t=u(r,"height")+s(r,"marginTop")+s(r,"marginBottom")+s(r,"borderTopWidth")+s(r,"borderBottomWidth")+s(r,"paddingTop")+s(r,"paddingBottom");}break;case"width":t=r.offsetWidth;if(t>0){t+=s(r,"marginLeft")+s(r,"marginRight");}else{t=u(r,"width")+s(r,"marginLeft")+s(r,"marginRight")+s(r,"borderLeftWidth")+s(r,"borderRightWidth")+s(r,"paddingLeft")+s(r,"paddingRight");}break;default:if(p=="int"){t=s(r,q);}else{if(p=="float"){t=u(r,q);}else{t=d.getStyle(r,q);}}break;}return t;}function N(u){var s=this,v,r,q=0,t=s.get("firstVisible"),p=false;if(s._itemsTable.numItems===0){return 0;}if(typeof u=="undefined"){if(s._itemsTable.size>0){return s._itemsTable.size;}}r=s._itemsTable.items[t]||s._itemsTable.loading[t];if(n.isUndefined(r)){return 0;}v=d.get(r.id);if(typeof u=="undefined"){p=s.get("isVertical");}else{p=u=="height";}if(p){q=c(v,"height");}else{q=c(v,"width");}if(typeof u=="undefined"){s._itemsTable.size=q;}return q;}function D(q){var p=this.get("numVisible");return Math.floor(q/p)*p;}function i(r){var q=0,p=0;q=N.call(this);p=q*r;if(this.get("isVertical")&&!this._rows){p-=r;}return p;}function g(p,q){q.scrollPageBackward();b.preventDefault(p);}function j(p,q){q.scrollPageForward();b.preventDefault(p);}function l(u,q){var y=this,z=y.CLASSES,p,w=y._firstItem,r=y.get("isCircular"),v=y.get("numItems"),x=y.get("numVisible"),t=q,s=w+x-1;if(t>=0&&t<v){if(!n.isUndefined(y._itemsTable.items[t])){p=d.get(y._itemsTable.items[t].id);if(p){d.removeClass(p,z.SELECTED_ITEM);}}}if(n.isNumber(u)){u=parseInt(u,10);u=n.isNumber(u)?u:0;}else{u=w;}if(n.isUndefined(y._itemsTable.items[u])){u=D.call(y,u);y.scrollTo(u);}if(!n.isUndefined(y._itemsTable.items[u])){p=d.get(y._itemsTable.items[u].id);if(p){d.addClass(p,z.SELECTED_ITEM);}}if(u<w||u>s){u=D.call(y,u);y.scrollTo(u);}}function k(){var r=false,u=this,q=u.CLASSES,t,p,s;if(!u._hasRendered){return;}p=u.get("navigation");s=u._firstItem+u.get("numVisible");if(p.prev){if(u.get("numItems")===0||u._firstItem===0){if(u.get("numItems")===0||!u.get("isCircular")){b.removeListener(p.prev,"click",g);d.addClass(p.prev,q.FIRST_NAV_DISABLED);for(t=0;t<u._navBtns.prev.length;t++){u._navBtns.prev[t].setAttribute("disabled","true");}u._prevEnabled=false;}else{r=!u._prevEnabled;}}else{r=!u._prevEnabled;}if(r){b.on(p.prev,"click",g,u);d.removeClass(p.prev,q.FIRST_NAV_DISABLED);for(t=0;t<u._navBtns.prev.length;t++){u._navBtns.prev[t].removeAttribute("disabled");}u._prevEnabled=true;}}r=false;if(p.next){if(s>=u.get("numItems")){if(!u.get("isCircular")){b.removeListener(p.next,"click",j);d.addClass(p.next,q.DISABLED);for(t=0;t<u._navBtns.next.length;t++){u._navBtns.next[t].setAttribute("disabled","true");}u._nextEnabled=false;}else{r=!u._nextEnabled;}}else{r=!u._nextEnabled;}if(r){b.on(p.next,"click",j,u);d.removeClass(p.next,q.DISABLED);for(t=0;t<u._navBtns.next.length;t++){u._navBtns.next[t].removeAttribute("disabled");}u._nextEnabled=true;}}u.fireEvent(I,{next:u._nextEnabled,prev:u._prevEnabled});}function Q(r){var s=this,p,q;if(!s._hasRendered){return;}q=s.get("numVisible");if(!n.isNumber(r)){r=Math.ceil(s.get("selectedItem")/q);}p=Math.ceil(s.get("numItems")/q);s._pages.num=p;s._pages.cur=r;if(p>s.CONFIG.MAX_PAGER_BUTTONS){s._updatePagerMenu();}else{s._updatePagerButtons();}}function M(p,q){switch(q){case"height":return c(p,"marginTop")+c(p,"marginBottom")+c(p,"paddingTop")+c(p,"paddingBottom")+c(p,"borderTopWidth")+c(p,"borderBottomWidth");break;case"width":return c(p,"marginLeft")+c(p,"marginRight")+c(p,"paddingLeft")+c(p,"paddingRight")+c(p,"borderLeftWidth")+c(p,"borderRightWidth");break;}}function A(r){var q=this,p=q._rows;if(!n.isObject(r)){return;}if(p){q._indexRows();}switch(r.ev){case R:q._syncUiForItemAdd(r);break;case m:q._syncUiForItemRemove(r);break;case P:q._syncUiForItemReplace(r);break;case L:q._syncUiForLazyLoading(r);break;}q.fireEvent(K);}function E(s,q){var u=this,t=u.get("currentPage"),r,p=u.get("numVisible");r=parseInt(u._firstItem/p,10);if(r!=t){u.setAttributeConfig("currentPage",{value:r});u.fireEvent(f,r);}if(u.get("selectOnScroll")){if(u.get("selectedItem")!=u._selectedItem){u.set("selectedItem",u._selectedItem);}}clearTimeout(u._autoPlayTimer);delete u._autoPlayTimer;if(u.isAutoPlayOn()){u.startAutoPlay();}u.fireEvent(F,{first:u._firstItem,last:q},u);}T.getById=function(p){return S[p]?S[p].object:false;};YAHOO.extend(T,YAHOO.util.Element,{_rows:null,_cols:null,_animObj:null,_carouselEl:null,_clipEl:null,_firstItem:0,_hasFocus:false,_hasRendered:false,_isAnimationInProgress:false,_isAutoPlayInProgress:false,_itemsTable:null,_navBtns:null,_navEl:null,_nextEnabled:true,_pages:null,_pagination:{},_prevEnabled:true,_recomputeSize:true,CLASSES:{BUTTON:"yui-carousel-button",CAROUSEL:"yui-carousel",CAROUSEL_EL:"yui-carousel-element",CONTAINER:"yui-carousel-container",CONTENT:"yui-carousel-content",DISABLED:"yui-carousel-button-disabled",FIRST_NAV:" yui-carousel-first-button",FIRST_NAV_DISABLED:"yui-carousel-first-button-disabled",FIRST_PAGE:"yui-carousel-nav-first-page",FOCUSSED_BUTTON:"yui-carousel-button-focus",HORIZONTAL:"yui-carousel-horizontal",ITEM_LOADING:"yui-carousel-item-loading",MIN_WIDTH:"yui-carousel-min-width",NAVIGATION:"yui-carousel-nav",NEXT_NAV:" yui-carousel-next-button",NEXT_PAGE:"yui-carousel-next",NAV_CONTAINER:"yui-carousel-buttons",PAGINATION:"yui-carousel-pagination",PAGE_FOCUS:"yui-carousel-nav-page-focus",PREV_PAGE:"yui-carousel-prev",SELECTED_ITEM:"yui-carousel-item-selected",SELECTED_NAV:"yui-carousel-nav-page-selected",VERTICAL:"yui-carousel-vertical",MULTI_ROW:"yui-carousel-multi-row",ROW:"yui-carousel-row",VERTICAL_CONTAINER:"yui-carousel-vertical-container",VISIBLE:"yui-carousel-visible"},CONFIG:{FIRST_VISIBLE:0,HORZ_MIN_WIDTH:180,MAX_PAGER_BUTTONS:5,VERT_MIN_WIDTH:115,NUM_VISIBLE:3},STRINGS:{ITEM_LOADING_CONTENT:"Loading",NEXT_BUTTON_TEXT:"Next Page",PAGER_PREFIX_TEXT:"Go to page ",PREVIOUS_BUTTON_TEXT:"Previous Page"},addItem:function(w,q){var v=this,y=v._rows,s,r,p,x=0,u,t=v.get("numItems");
if(!w){return false;}if(n.isString(w)||w.nodeName){r=w.nodeName?w.innerHTML:w;}else{if(n.isObject(w)){r=w.content;}else{return false;}}s=w.className||"";p=w.id?w.id:d.generateId();if(n.isUndefined(q)){v._itemsTable.items.push({item:r,className:s,id:p});u=v._itemsTable.items.length-1;}else{if(q<0||q>t){return false;}if(!v._itemsTable.items[q]){v._itemsTable.items[q]=undefined;x=1;}v._itemsTable.items.splice(q,x,{item:r,className:s,id:p});}v._itemsTable.numItems++;if(t<v._itemsTable.items.length){v.set("numItems",v._itemsTable.items.length);}v.fireEvent(R,{pos:q,ev:R,newPos:u});return true;},addItems:function(p){var q,s,r=true;if(!n.isArray(p)){return false;}for(q=0,s=p.length;q<s;q++){if(this.addItem(p[q][0],p[q][1])===false){r=false;}}return r;},blur:function(){this._carouselEl.blur();this.fireEvent(B);},clearItems:function(){var p=this,q=p.get("numItems");while(q>0){if(!p.removeItem(0)){}if(p._itemsTable.numItems===0){p.set("numItems",0);break;}q--;}p.fireEvent(e);},focus:function(){var y=this,t,u,v,s,x,z,q,r,p;if(!y._hasRendered){return;}if(y.isAnimating()){return;}p=y.get("selectedItem");z=y.get("numVisible");q=y.get("selectOnScroll");r=(p>=0)?y.getItem(p):null;t=y.get("firstVisible");x=t+z-1;v=(p<t||p>x);u=(r&&r.id)?d.get(r.id):null;s=y._itemsTable;if(!q&&v){u=(s&&s.items&&s.items[t])?d.get(s.items[t].id):null;}if(u){try{u.focus();}catch(w){}}y.fireEvent(W);},hide:function(){var p=this;if(p.fireEvent(a)!==false){p.removeClass(p.CLASSES.VISIBLE);p.fireEvent(Z);}},init:function(s,q){var t=this,p=s,u=false,r;if(!s){return;}t._hasRendered=false;t._navBtns={prev:[],next:[]};t._pages={el:null,num:0,cur:0};t._pagination={};t._itemsTable={loading:{},numItems:0,items:[],size:0};if(n.isString(s)){s=d.get(s);}else{if(!s.nodeName){return;}}T.superclass.init.call(t,s,q);r=t.get("selectedItem");if(r>0){t.set("firstVisible",D.call(t,r));}if(s){if(!s.id){s.setAttribute("id",d.generateId());}u=t._parseCarousel(s);if(!u){t._createCarousel(p);}}else{s=t._createCarousel(p);}p=s.id;t.initEvents();if(u){t._parseCarouselItems();}if(r>0){l.call(t,r,0);}if(!q||typeof q.isVertical=="undefined"){t.set("isVertical",false);}t._parseCarouselNavigation(s);t._navEl=t._setupCarouselNavigation();S[p]={object:t};t._loadItems(Math.min(t.get("firstVisible")+t.get("numVisible"),t.get("numItems"))-1);},initAttributes:function(p){var q=this;p=p||{};T.superclass.initAttributes.call(q,p);q.setAttributeConfig("carouselEl",{validator:n.isString,value:p.carouselEl||"OL"});q.setAttributeConfig("carouselItemEl",{validator:n.isString,value:p.carouselItemEl||"LI"});q.setAttributeConfig("currentPage",{readOnly:true,value:0});q.setAttributeConfig("firstVisible",{method:q._setFirstVisible,validator:q._validateFirstVisible,value:p.firstVisible||q.CONFIG.FIRST_VISIBLE});q.setAttributeConfig("selectOnScroll",{validator:n.isBoolean,value:p.selectOnScroll||true});q.setAttributeConfig("numVisible",{setter:q._numVisibleSetter,method:q._setNumVisible,validator:q._validateNumVisible,value:p.numVisible||q.CONFIG.NUM_VISIBLE});q.setAttributeConfig("numItems",{method:q._setNumItems,validator:q._validateNumItems,value:q._itemsTable.numItems});q.setAttributeConfig("scrollIncrement",{validator:q._validateScrollIncrement,value:p.scrollIncrement||1});q.setAttributeConfig("selectedItem",{setter:q._selectedItemSetter,method:q._setSelectedItem,validator:n.isNumber,value:-1});q.setAttributeConfig("revealAmount",{method:q._setRevealAmount,validator:q._validateRevealAmount,value:p.revealAmount||0});q.setAttributeConfig("isCircular",{validator:n.isBoolean,value:p.isCircular||false});q.setAttributeConfig("isVertical",{method:q._setOrientation,validator:n.isBoolean,value:p.isVertical||false});q.setAttributeConfig("navigation",{method:q._setNavigation,validator:q._validateNavigation,value:p.navigation||{prev:null,next:null,page:null}});q.setAttributeConfig("animation",{validator:q._validateAnimation,value:p.animation||{speed:0,effect:null}});q.setAttributeConfig("autoPlay",{validator:n.isNumber,value:p.autoPlay||0});q.setAttributeConfig("autoPlayInterval",{validator:n.isNumber,value:p.autoPlayInterval||0});q.setAttributeConfig("numPages",{readOnly:true,getter:q._getNumPages});q.setAttributeConfig("lastVisible",{readOnly:true,getter:q._getLastVisible});},initEvents:function(){var r=this,q=r.CLASSES,p;r.on("keydown",r._keyboardEventHandler);r.on(F,k);r.on(R,A);r.on(m,A);r.on(P,A);r.on(C,function(){if(r._hasFocus){r.focus();}});r.on(L,A);r.on(e,function(s){r.scrollTo(0);k.call(r);Q.call(r);});r.on(f,Q,r);r.on(H,function(s){if(r.get("selectedItem")===null){r.set("selectedItem",r.get("firstVisible"));}k.call(r,s);Q.call(r,s);r._setClipContainerSize();});r.on("selectedItemChange",function(s){l.call(r,s.newValue,s.prevValue);if(s.newValue>=0){r._updateTabIndex(r.getElementForItem(s.newValue));}r.fireEvent(C,s.newValue);});r.on(K,function(s){k.call(r,s);Q.call(r,s);});r.on("firstVisibleChange",function(s){if(!r.get("selectOnScroll")){if(s.newValue>=0){r._updateTabIndex(r.getElementForItem(s.newValue));}}});r.on("click",function(s){if(r.isAutoPlayOn()){r.stopAutoPlay();}r._itemClickHandler(s);r._pagerClickHandler(s);});b.onFocus(r.get("element"),function(s,u){var t=b.getTarget(s);if(t&&t.nodeName.toUpperCase()=="A"&&d.getAncestorByClassName(t,q.NAVIGATION)){if(p){d.removeClass(p,q.PAGE_FOCUS);}p=t.parentNode;d.addClass(p,q.PAGE_FOCUS);}else{if(p){d.removeClass(p,q.PAGE_FOCUS);}}u._hasFocus=true;u._updateNavButtons(b.getTarget(s),true);},r);b.onBlur(r.get("element"),function(s,t){t._hasFocus=false;t._updateNavButtons(b.getTarget(s),false);},r);},isAnimating:function(){return this._isAnimationInProgress;},isAutoPlayOn:function(){return this._isAutoPlayInProgress;},getElementForItem:function(p){var q=this;if(p<0||p>=q.get("numItems")){return null;}if(q._itemsTable.items[p]){return d.get(q._itemsTable.items[p].id);}return null;},getElementForItems:function(){var r=this,q=[],p;for(p=0;p<r._itemsTable.numItems;p++){q.push(r.getElementForItem(p));}return q;},getItem:function(p){var q=this;
if(p<0||p>=q.get("numItems")){return null;}if(q._itemsTable.numItems>p){if(!n.isUndefined(q._itemsTable.items[p])){return q._itemsTable.items[p];}}return null;},getItems:function(p){return this._itemsTable.items;},getRows:function(){return this._rows;},getCols:function(){return this._cols;},getItemPositionById:function(t){var r=this,s=r.get("numItems"),p=0,q;while(p<s){q=r._itemsTable.items[p]||{};if(q.id==t){return p;}p++;}return -1;},getVisibleItems:function(){var s=this,p=s.get("firstVisible"),t=p+s.get("numVisible"),q=[];while(p<t){q.push(s.getElementForItem(p));p++;}return q;},removeItem:function(q){var t=this,s=t._rows,r,p=t.get("numItems");if(q<0||q>=p){return false;}r=t._itemsTable.items.splice(q,1);if(r&&r.length==1){t._itemsTable.numItems--;t.set("numItems",p-1);t.fireEvent(m,{item:r[0],pos:q,ev:m});return true;}return false;},replaceItem:function(x,s){var w=this,y=w._rows,u,t,r,v=w.get("numItems"),q,p=x;if(!x){return false;}if(n.isString(x)||x.nodeName){t=x.nodeName?x.innerHTML:x;}else{if(n.isObject(x)){t=x.content;}else{return false;}}if(n.isUndefined(s)){return false;}else{if(s<0||s>=v){return false;}q=w._itemsTable.items[s];if(!q){q=w._itemsTable.loading[s];w._itemsTable.items[s]=undefined;}w._itemsTable.items.splice(s,1,{item:t,className:x.className||"",id:d.generateId()});p=w._itemsTable.items[s];}w.fireEvent(P,{newItem:p,oldItem:q,pos:s,ev:P});return true;},replaceItems:function(p){var q,s,r=true;if(!n.isArray(p)){return false;}for(q=0,s=p.length;q<s;q++){if(this.replaceItem(p[q][0],p[q][1])===false){r=false;}}return r;},render:function(q){var s=this,p=s.CLASSES,r=s._rows;s.addClass(p.CAROUSEL);if(!s._clipEl){s._clipEl=s._createCarouselClip();s._clipEl.appendChild(s._carouselEl);}if(q){s.appendChild(s._clipEl);s.appendTo(q);}else{if(!d.inDocument(s.get("element"))){return false;}s.appendChild(s._clipEl);}if(r){d.addClass(s._clipEl,p.MULTI_ROW);}if(s.get("isVertical")){s.addClass(p.VERTICAL);}else{s.addClass(p.HORIZONTAL);}if(s.get("numItems")<1){return false;}s._refreshUi();if(r){s._indexRows();}return true;},scrollBackward:function(){var p=this;p.scrollTo(p._firstItem-p.get("scrollIncrement"));},scrollForward:function(){var p=this;p.scrollTo(p._firstItem+p.get("scrollIncrement"));},scrollPageBackward:function(){var q=this,p=q._firstItem-q.get("numVisible");if(q.get("selectOnScroll")){q._selectedItem=q._getSelectedItem(p);}else{p=q._getValidIndex(p);}q.scrollTo(p);},scrollPageForward:function(){var q=this,p=q._firstItem+q.get("numVisible");if(q.get("selectOnScroll")){q._selectedItem=q._getSelectedItem(p);}else{p=q._getValidIndex(p);}q.scrollTo(p);},scrollTo:function(AG,AE){var AD=this,r,AF,w,y,z,AH,AI,AJ,AA,s,x,AC,p,t,q,u,AB,v,AK;if(n.isUndefined(AG)||AG==AD._firstItem||AD.isAnimating()){return;}AF=AD.get("animation");w=AD.get("isCircular");y=AD.get("isVertical");s=AD._cols;x=AD._rows;AJ=AD._firstItem;AC=AD.get("numItems");p=AD.get("numVisible");q=AD.get("currentPage");AK=function(){if(AD.isAutoPlayOn()){AD.stopAutoPlay();}};if(AG<0){if(w){AG=AC+AG;}else{AK.call(AD);return;}}else{if(AC>0&&AG>AC-1){if(AD.get("isCircular")){AG=AC-AG;}else{AK.call(AD);return;}}}AI=(AD._firstItem>AG)?"backward":"forward";AB=AJ+p;AB=(AB>AC-1)?AC-1:AB;u=AD.fireEvent(h,{dir:AI,first:AJ,last:AB});if(u===false){return;}AD.fireEvent(J,{page:q});AA=AG+p-1;AD._loadItems(AA>AC-1?AC-1:AA);AH=0-AG;if(x){if(y){AH=parseInt(AH/s,10);}else{AH=parseInt(AH/x,10);}}v=0;while(AH<0&&v<AG+p-1&&v<AC){if(n.isUndefined(AD._itemsTable.items[v])&&n.isUndefined(AD._itemsTable.loading[v])){AH++;}v+=x?x:1;}AD._firstItem=AG;AD.set("firstVisible",AG);AB=AG+p;AB=(AB>AC-1)?AC-1:AB;t=i.call(AD,AH);r=AF.speed>0;if(r){AD._animateAndSetCarouselOffset(t,AG,AB,AE);}else{AD._setCarouselOffset(t);E.call(AD,AG,AB);}},getPageForItem:function(p){return Math.ceil((p+1)/parseInt(this.get("numVisible"),10));},selectPreviousItem:function(){var r=this,q=0,p=r.get("selectedItem");if(p==this._firstItem){q=p-r.get("numVisible");r._selectedItem=r._getSelectedItem(p-1);r.scrollTo(q);}else{q=r.get("selectedItem")-r.get("scrollIncrement");r.set("selectedItem",r._getSelectedItem(q));}},selectNextItem:function(){var q=this,p=0;p=q.get("selectedItem")+q.get("scrollIncrement");q.set("selectedItem",q._getSelectedItem(p));},show:function(){var q=this,p=q.CLASSES;if(q.fireEvent(X)!==false){q.addClass(p.VISIBLE);q.fireEvent(U);}},startAutoPlay:function(){var p=this,q;if(n.isUndefined(p._autoPlayTimer)){q=p.get("autoPlayInterval");if(q<=0){return;}p._isAutoPlayInProgress=true;p.fireEvent(Y);p._autoPlayTimer=setTimeout(function(){p._autoScroll();},q);}},stopAutoPlay:function(){var p=this;if(!n.isUndefined(p._autoPlayTimer)){clearTimeout(p._autoPlayTimer);delete p._autoPlayTimer;p._isAutoPlayInProgress=false;p.fireEvent(o);}},updatePagination:function(){var x=this,v=x._pagination;if(!v.el){return false;}var u=x.get("numItems"),y=x.get("numVisible"),s=x.get("firstVisible")+1,t=x.get("currentPage")+1,p=x.get("numPages"),r={"numVisible":y,"numPages":p,"numItems":u,"selectedItem":x.get("selectedItem")+1,"currentPage":t,"firstVisible":s,"lastVisible":x.get("lastVisible")},q=v.callback||{},w=q.scope&&q.obj?q.obj:x;v.el.innerHTML=n.isFunction(q.fn)?q.fn.apply(w,[v.template,r]):YAHOO.lang.substitute(v.template,r);},registerPagination:function(q,s,p){var r=this;r._pagination.template=q;r._pagination.callback=p||{};if(!r._pagination.el){r._pagination.el=V("DIV",{className:r.CLASSES.PAGINATION});if(s=="before"){r._navEl.insertBefore(r._pagination.el,r._navEl.firstChild);}else{r._navEl.appendChild(r._pagination.el);}r.on("itemSelected",r.updatePagination);r.on("pageChange",r.updatePagination);}r.updatePagination();},toString:function(){return O+(this.get?" (#"+this.get("id")+")":"");},_animateAndSetCarouselOffset:function(u,s,q){var t=this,r=t.get("animation"),p=null;if(t.get("isVertical")){p=new YAHOO.util.Motion(t._carouselEl,{points:{to:[0,u]}},r.speed,r.effect);}else{p=new YAHOO.util.Motion(t._carouselEl,{points:{to:[u,0]}},r.speed,r.effect);}t._isAnimationInProgress=true;
p.onComplete.subscribe(t._animationCompleteHandler,{scope:t,item:s,last:q});p.animate();},_animationCompleteHandler:function(q,r,s){s.scope._isAnimationInProgress=false;E.call(s.scope,s.item,s.last);},_autoScroll:function(){var q=this,r=q._firstItem,p;if(r>=q.get("numItems")-1){if(q.get("isCircular")){p=0;}else{q.stopAutoPlay();}}else{p=r+q.get("numVisible");}q._selectedItem=q._getSelectedItem(p);q.scrollTo.call(q,p);},_createCarousel:function(q){var s=this,p=s.CLASSES,r=d.get(q);if(!r){r=V("DIV",{className:p.CAROUSEL,id:q});}if(!s._carouselEl){s._carouselEl=V(s.get("carouselEl"),{className:p.CAROUSEL_EL});}return r;},_createCarouselClip:function(){return V("DIV",{className:this.CLASSES.CONTENT});},_createCarouselItem:function(p){return V(this.get("carouselItemEl"),{className:p.className,styles:p.styles,content:p.content,id:p.id});},_getValidIndex:function(r){var u=this,p=u.get("isCircular"),s=u.get("numItems"),t=u.get("numVisible"),q=s-1;if(r<0){r=p?Math.ceil(s/t)*t+r:0;}else{if(r>q){r=p?0:q;}}return r;},_getSelectedItem:function(t){var s=this,p=s.get("isCircular"),r=s.get("numItems"),q=r-1;if(t<0){if(p){t=r+t;}else{t=s.get("selectedItem");}}else{if(t>q){if(p){t=t-r;}else{t=s.get("selectedItem");}}}return t;},_itemClickHandler:function(s){var v=this,t=v.get("carouselItemEl"),p=v.get("element"),q,r,u=b.getTarget(s);while(u&&u!=p&&u.id!=v._carouselEl){q=u.nodeName;if(q.toUpperCase()==t){break;}u=u.parentNode;}if((r=v.getItemPositionById(u.id))>=0){v.set("selectedItem",v._getSelectedItem(r));v.focus();}},_keyboardEventHandler:function(r){var s=this,q=b.getCharCode(r),p=false;if(s.isAnimating()){return;}switch(q){case 37:case 38:s.selectPreviousItem();p=true;break;case 39:case 40:s.selectNextItem();p=true;break;case 33:s.scrollPageBackward();p=true;break;case 34:s.scrollPageForward();p=true;break;}if(p){if(s.isAutoPlayOn()){s.stopAutoPlay();}b.preventDefault(r);}},_loadItems:function(r){var u=this,q=u.get("numItems"),s=u.get("numVisible"),t=u.get("revealAmount"),v=u._itemsTable.items.length,p=u.get("lastVisible");if(v>r&&r+1>=s){v=r%s||r==p?r-r%s:r-s+1;}if(t&&r<q-1){r++;}if(r>=v&&(!u.getItem(v)||!u.getItem(r))){u.fireEvent(L,{ev:L,first:v,last:r,num:r-v+1});}},_pagerClickHandler:function(q){var t=this,r,v,s=b.getTarget(q),u;function p(y){var x=t.get("carouselItemEl"),w=y.nodeName.toUpperCase();if(w==x.toUpperCase()){y=d.getChildrenBy(y,function(z){return z.href||z.value;});if(y&&y[0]){y=y[0];}}else{if(w=="EM"){y=y.parentNode;}}return y.href||y.value?y:null;}if(s){s=p(s);if(!s){return;}u=s.href||s.value;if(n.isString(u)&&u){v=u.lastIndexOf("#");r=parseInt(u.substring(v+1),10);if(r!=-1){u=(r-1)*t.get("numVisible");t._selectedItem=u;t.scrollTo(u);if(!s.value){t.focus();}b.preventDefault(q);}}}},_parseCarousel:function(r){var u=this,v,p,q,t,s;p=u.CLASSES;q=u.get("carouselEl");t=false;for(v=r.firstChild;v;v=v.nextSibling){if(v.nodeType==1){s=v.nodeName;if(s.toUpperCase()==q){u._carouselEl=v;d.addClass(u._carouselEl,u.CLASSES.CAROUSEL_EL);t=true;}}}return t;},_parseCarouselItems:function(){var w=this,y=w.CLASSES,t=0,x,p,r,s,q,u=w.get("firstVisible"),v=w._carouselEl;x=w._rows;r=w.get("carouselItemEl");for(p=v.firstChild;p;p=p.nextSibling){if(p.nodeType==1){q=p.nodeName;if(q.toUpperCase()==r){if(p.id){s=p.id;}else{s=d.generateId();p.setAttribute("id",s);}w.addItem(p,u);u++;}}}},_indexRows:function(){var AB=this,y=AB.get("isVertical"),AC=AB.get("numVisible"),AD=AB._itemsTable,s=AD.loading,w=AD.items,u=w.length,AF=AB._rows,x=AB._cols,AA,z,p,AE,q,r,v;if(AF&&x){AE=0;q=0;r=N.call(AB,"height");v=N.call(AB,"width");for(var t=0;t<u;t++){AA=w[t]?d.get(w[t].id):s[t];if(AA){if(y){q++;if(t%x===0){z=Math.floor(t/AC);q=0;if(t!==0){AE++;}}}else{q++;if(t%x===0){z=Math.floor(t/AC);q=z*x;AE++;}if(t%AC===0){AE=0;}}w[t].styles={left:(q*v)+"px",top:(AE*r)+"px"};}}}},_parseCarouselNavigation:function(v){var w=this,u,x=w.CLASSES,q,t,s,p,r=false;p=d.getElementsByClassName(x.PREV_PAGE,"*",v);if(p.length>0){for(t in p){if(p.hasOwnProperty(t)){q=p[t];if(q.nodeName=="INPUT"||q.nodeName=="BUTTON"||q.nodeName=="A"){w._navBtns.prev.push(q);}else{s=q.getElementsByTagName("INPUT");if(n.isArray(s)&&s.length>0){w._navBtns.prev.push(s[0]);}else{s=q.getElementsByTagName("BUTTON");if(n.isArray(s)&&s.length>0){w._navBtns.prev.push(s[0]);}}}}}u={prev:p};}p=d.getElementsByClassName(x.NEXT_PAGE,"*",v);if(p.length>0){for(t in p){if(p.hasOwnProperty(t)){q=p[t];if(q.nodeName=="INPUT"||q.nodeName=="BUTTON"||q.nodeName=="A"){w._navBtns.next.push(q);}else{s=q.getElementsByTagName("INPUT");if(n.isArray(s)&&s.length>0){w._navBtns.next.push(s[0]);}else{s=q.getElementsByTagName("BUTTON");if(n.isArray(s)&&s.length>0){w._navBtns.next.push(s[0]);}}}}}if(u){u.next=p;}else{u={next:p};}}if(u){w.set("navigation",u);r=true;}return r;},_refreshUi:function(){var s=this,p,t,q,u,r;t=s.get("isVertical");r=N.call(s,t?"height":"width");for(p=0,u=s._itemsTable.numItems;p<u;p++){if(n.isUndefined(s._itemsTable.items[p].pos)){q=s._itemsTable.items[p].id;s._itemsTable.items[p].pos=p*r;if(t){d.setStyle(q,"left","0");d.setStyle(q,"top",(p*r)+"px");}else{d.setStyle(q,"left",(p*r)+"px");d.setStyle(q,"top","0");}}}q=s._itemsTable.items[0].id;r=t?c(q,"width"):c(q,"height");d.setStyle(s._carouselEl,t?"width":"height",r+"px");s._hasRendered=true;s.fireEvent(H);},_setCarouselOffset:function(r){var p=this,q;q=p.get("isVertical")?"top":"left";d.setStyle(p._carouselEl,q,r+"px");},_setupCarouselNavigation:function(){var u=this,s,q,p,w,t,v,r;p=u.CLASSES;t=d.getElementsByClassName(p.NAVIGATION,"DIV",u.get("element"));if(t.length===0){t=V("DIV",{className:p.NAVIGATION});u.insertBefore(t,d.getFirstChild(u.get("element")));}else{t=t[0];}u._pages.el=V("UL");t.appendChild(u._pages.el);w=u.get("navigation");if(n.isString(w.prev)||n.isArray(w.prev)){if(n.isString(w.prev)){w.prev=[w.prev];}for(s in w.prev){if(w.prev.hasOwnProperty(s)){u._navBtns.prev.push(d.get(w.prev[s]));}}}else{r=V("SPAN",{className:p.BUTTON+p.FIRST_NAV});d.setStyle(r,"visibility","visible");s=d.generateId();r.innerHTML='<button type="button" '+'id="'+s+'" name="'+u.STRINGS.PREVIOUS_BUTTON_TEXT+'">'+u.STRINGS.PREVIOUS_BUTTON_TEXT+"</button>";
t.appendChild(r);s=d.get(s);u._navBtns.prev=[s];q={prev:[r]};}if(n.isString(w.next)||n.isArray(w.next)){if(n.isString(w.next)){w.next=[w.next];}for(s in w.next){if(w.next.hasOwnProperty(s)){u._navBtns.next.push(d.get(w.next[s]));}}}else{v=V("SPAN",{className:p.BUTTON+p.NEXT_NAV});d.setStyle(v,"visibility","visible");s=d.generateId();v.innerHTML='<button type="button" '+'id="'+s+'" name="'+u.STRINGS.NEXT_BUTTON_TEXT+'">'+u.STRINGS.NEXT_BUTTON_TEXT+"</button>";t.appendChild(v);s=d.get(s);u._navBtns.next=[s];if(q){q.next=[v];}else{q={next:[v]};}}if(q){u.set("navigation",q);}return t;},_setClipContainerSize:function(p,s){var z=this,x=z.get("isVertical"),AB=z._rows,v=z._cols,y=z.get("revealAmount"),r=x?"height":"width",u=x?"top":"left",p=p||z._clipEl,q=N.call(z,"height"),t=N.call(z,"width"),AA,w;if(AB){AA=q*AB;w=t*v;}else{s=s||z.get("numVisible");if(x){AA=q*s;}else{w=t*s;}}z._recomputeSize=(AA===0);if(z._recomputeSize){z._hasRendered=false;return;}if(y>0){if(x){y=q*(y/100)*2;AA+=y;}else{y=t*(y/100)*2;w+=y;}currVal=parseFloat(d.getStyle(z._carouselEl,u));currVal=n.isNumber(currVal)?currVal:0;d.setStyle(z._carouselEl,u,currVal+(y/2)+"px");}if(x){AA+=M(z._carouselEl,"height");d.setStyle(p,"height",AA+"px");if(v){w+=M(z._carouselEl,"width");d.setStyle(p,"width",w+(0)+"px");}}else{w+=M(z._carouselEl,"width");d.setStyle(p,"width",w+"px");if(AB){AA+=M(z._carouselEl,"height");d.setStyle(p,"height",AA+"px");}}z._setContainerSize(p);},_setContainerSize:function(q,r){var u=this,p=u.CONFIG,x=u.CLASSES,t,w,s,v;t=u.get("isVertical");w=u._rows;s=u._cols;q=q||u._clipEl;r=r||(t?"height":"width");v=parseFloat(d.getStyle(q,r),10);v=n.isNumber(v)?v:0;if(t){v+=M(u._carouselEl,"height")+c(u._navEl,"height");}else{v+=M(u._carouselEl,"width");}if(!t){if(v<p.HORZ_MIN_WIDTH){v=p.HORZ_MIN_WIDTH;u.addClass(x.MIN_WIDTH);}}u.setStyle(r,v+"px");if(t){v=N.call(u,"width");if(s){v=v*s;}d.setStyle(u._carouselEl,"width",v+"px");if(v<p.VERT_MIN_WIDTH){v=p.VERT_MIN_WIDTH;u.addClass(x.MIN_WIDTH);}u.setStyle("width",v+"px");}else{if(w){v=N.call(u,"height");v=v*w;d.setStyle(u._carouselEl,"height",v+"px");}}},_setFirstVisible:function(q){var p=this;if(q>=0&&q<p.get("numItems")){p.scrollTo(q);}else{q=p.get("firstVisible");}return q;},_setNavigation:function(p){var q=this;if(p.prev){b.on(p.prev,"click",g,q);}if(p.next){b.on(p.next,"click",j,q);}},_setNumVisible:function(q){var p=this;p._setClipContainerSize(p._clipEl,q);},_numVisibleSetter:function(r){var q=this,p=r;if(n.isArray(r)){q._cols=r[0];q._rows=r[1];p=r[0]*r[1];}return p;},_selectedItemSetter:function(q){var p=this;return(q<p.get("numItems"))?q:0;},_setNumItems:function(r){var q=this,p=q._itemsTable.numItems;if(n.isArray(q._itemsTable.items)){if(q._itemsTable.items.length!=p){p=q._itemsTable.items.length;q._itemsTable.numItems=p;}}if(r<p){while(p>r){q.removeItem(p-1);p--;}}return r;},_setOrientation:function(r){var q=this,p=q.CLASSES;if(r){q.replaceClass(p.HORIZONTAL,p.VERTICAL);}else{q.replaceClass(p.VERTICAL,p.HORIZONTAL);}q._itemsTable.size=0;return r;},_setRevealAmount:function(q){var p=this;if(q>=0&&q<=100){q=parseInt(q,10);q=n.isNumber(q)?q:0;p._setClipContainerSize();}else{q=p.get("revealAmount");}return q;},_setSelectedItem:function(p){this._selectedItem=p;},_getNumPages:function(){return Math.ceil(parseInt(this.get("numItems"),10)/parseInt(this.get("numVisible"),10));},_getLastVisible:function(){var p=this;return p.get("currentPage")+1==p.get("numPages")?p.get("numItems")-1:p.get("firstVisible")+p.get("numVisible");},_syncUiForItemAdd:function(s){var w=this,u=w._carouselEl,p,x,r=w._itemsTable,q,t,v;t=n.isUndefined(s.pos)?s.newPos||r.numItems-1:s.pos;if(!n.isUndefined(r.items[t])){x=r.items[t];if(x){if(x.id){q=d.get(x.id);if(x.styles){G(q,x.styles);}}}}if(!q){p=w._createCarouselItem({className:x.className,styles:x.styles,content:x.item,id:x.id});if(n.isUndefined(s.pos)){if(!n.isUndefined(r.loading[t])){q=r.loading[t];}if(q){u.replaceChild(p,q);delete r.loading[t];}else{u.appendChild(p);}}else{if(!n.isUndefined(r.items[s.pos+1])){v=d.get(r.items[s.pos+1].id);}if(v){u.insertBefore(p,v);}else{}}}else{if(n.isUndefined(s.pos)){if(!d.isAncestor(w._carouselEl,q)){u.appendChild(q);}}else{if(!d.isAncestor(u,q)){if(!n.isUndefined(r.items[s.pos+1])){u.insertBefore(q,d.get(r.items[s.pos+1].id));}}}}if(!w._hasRendered){w._refreshUi();}if(w.get("selectedItem")<0){w.set("selectedItem",w.get("firstVisible"));}},_syncUiForItemReplace:function(v){var u=this,r=u._carouselEl,p=u._itemsTable,w=v.pos,t=v.newItem,q=v.oldItem,s;s=u._createCarouselItem({className:t.className,styles:t.styles,content:t.item,id:t.id});if(s&&q){b.purgeElement(q,true);r.replaceChild(s,q);if(!n.isUndefined(p.loading[w])){p.numItems++;delete p.loading[w];}}if(!u._hasRendered){u._refreshUi();}},_syncUiForItemRemove:function(u){var t=this,p=t._carouselEl,r,s,q,v;q=t.get("numItems");s=u.item;v=u.pos;if(s&&(r=d.get(s.id))){if(r&&d.isAncestor(p,r)){b.purgeElement(r,true);p.removeChild(r);}if(t.get("selectedItem")==v){v=v>=q?q-1:v;}}else{}},_syncUiForLazyLoading:function(t){var x=this,v=x._carouselEl,r=x._itemsTable,u=r.items.length,w=r.items[t.last+1],p,q;if(!w&&t.last<u){q=t.first;do{w=r.items[q];q++;}while(q<u&&!w);}for(var s=t.first;s<=t.last;s++){if(n.isUndefined(r.loading[s])&&n.isUndefined(r.items[s])){p=x._createCarouselItem({className:x.CLASSES.ITEM_LOADING,content:x.STRINGS.ITEM_LOADING_CONTENT,id:d.generateId()});if(p){if(w){w=d.get(w.id);if(w){v.insertBefore(p,w);}else{}}else{v.appendChild(p);}}r.loading[s]=p;}}},_updateNavButtons:function(t,q){var r,p=this.CLASSES,u,s=t.parentNode;if(!s){return;}u=s.parentNode;if(t.nodeName.toUpperCase()=="BUTTON"&&d.hasClass(s,p.BUTTON)){if(q){if(u){r=d.getChildren(u);if(r){d.removeClass(r,p.FOCUSSED_BUTTON);}}d.addClass(s,p.FOCUSSED_BUTTON);}else{d.removeClass(s,p.FOCUSSED_BUTTON);}}},_updatePagerButtons:function(){var x=this,v=x.CLASSES,w=x._pages.cur,p,u,s,y,q=x.get("numVisible"),t=x._pages.num,r=x._pages.el;if(t===0||!r){return;}d.setStyle(r,"visibility","hidden");while(r.firstChild){r.removeChild(r.firstChild);
}for(s=0;s<t;s++){p=document.createElement("LI");if(s===0){d.addClass(p,v.FIRST_PAGE);}if(s==w){d.addClass(p,v.SELECTED_NAV);}u='<a href="#'+(s+1)+'" tabindex="0"><em>'+x.STRINGS.PAGER_PREFIX_TEXT+" "+(s+1)+"</em></a>";p.innerHTML=u;r.appendChild(p);}d.setStyle(r,"visibility","visible");},_updatePagerMenu:function(){var w=this,v=w._pages.cur,q,t,x,r=w.get("numVisible"),u=w._pages.num,s=w._pages.el,p;if(u===0){return;}p=document.createElement("SELECT");if(!p){return;}d.setStyle(s,"visibility","hidden");while(s.firstChild){s.removeChild(s.firstChild);}for(t=0;t<u;t++){q=document.createElement("OPTION");q.value="#"+t;q.innerHTML=w.STRINGS.PAGER_PREFIX_TEXT+" "+(t+1);if(t==v){q.setAttribute("selected","selected");}p.appendChild(q);}q=document.createElement("FORM");if(!q){}else{q.appendChild(p);s.appendChild(q);}d.setStyle(s,"visibility","visible");},_updateTabIndex:function(p){var q=this;if(p){if(q._focusableItemEl){q._focusableItemEl.tabIndex=-1;}q._focusableItemEl=p;p.tabIndex=0;}},_validateAnimation:function(p){var q=true;if(n.isObject(p)){if(p.speed){q=q&&n.isNumber(p.speed);}if(p.effect){q=q&&n.isFunction(p.effect);}else{if(!n.isUndefined(YAHOO.util.Easing)){p.effect=YAHOO.util.Easing.easeOut;}}}else{q=false;}return q;},_validateFirstVisible:function(r){var q=this,p=q.get("numItems");if(n.isNumber(r)){if(p===0&&r==p){return true;}else{return(r>=0&&r<p);}}return false;},_validateNavigation:function(p){var q;if(!n.isObject(p)){return false;}if(p.prev){if(!n.isArray(p.prev)){return false;}for(q in p.prev){if(p.prev.hasOwnProperty(q)){if(!n.isString(p.prev[q].nodeName)){return false;}}}}if(p.next){if(!n.isArray(p.next)){return false;}for(q in p.next){if(p.next.hasOwnProperty(q)){if(!n.isString(p.next[q].nodeName)){return false;}}}}return true;},_validateNumItems:function(p){return n.isNumber(p)&&(p>=0);},_validateNumVisible:function(p){var q=false;if(n.isNumber(p)){q=p>0&&p<=this.get("numItems");}else{if(n.isArray(p)){if(n.isNumber(p[0])&&n.isNumber(p[1])){q=p[0]*p[1]>0&&p.length==2;}}}return q;},_validateRevealAmount:function(p){var q=false;if(n.isNumber(p)){q=p>=0&&p<100;}return q;},_validateScrollIncrement:function(p){var q=false;if(n.isNumber(p)){q=(p>0&&p<this.get("numItems"));}return q;}});})();YAHOO.register("carousel",YAHOO.widget.Carousel,{version:"@VERSION@",build:"@BUILD@"});YAHOO.register("carousel",YAHOO.widget.Carousel,{version:"@VERSION@",build:"@BUILD@"});