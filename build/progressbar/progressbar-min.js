(function(){var J=YAHOO.util.Dom,K=YAHOO.lang,M="ltr",C="rtl",P="ttb",I="btt",B="yui-pb",O=B+"-mask",D=B+"-bar",H=B+"-caption",G=B+"-anim",F=B+"-tl",A=B+"-tr",L=B+"-bl",E=B+"-br";var N=function(Q){N.superclass.constructor.call(this,document.createElement("div"),Q);this._init(Q);};YAHOO.widget.ProgressBar=N;N.MARKUP=['<div class="',D,'"></div><div class="',H,'"></div><div class="',O,'"><div class="',F,'"></div><div class="',A,'"></div><div class="',L,'"></div><div class="',E,'"></div></div>'].join("");K.extend(N,YAHOO.util.Element,{_init:function(Q){},initAttributes:function(S){N.superclass.initAttributes.call(this,S);this.set("innerHTML",N.MARKUP);this.addClass(B);var R,Q=["id","width","height","class","style"];while((R=Q.pop())){if(R in S){this.set(R,S[R]);}}this.setAttributeConfig("barEl",{readOnly:true,value:this.getElementsByClassName(D)[0]});this.setAttributeConfig("maskEl",{readOnly:true,value:this.getElementsByClassName(O)[0]});this.setAttributeConfig("captionEl",{value:this.getElementsByClassName(H)[0],validator:function(T){return(K.isString(T)&&J.get(T))||(K.isObject(T)&&T.ownerDocument==document);},setter:function(T){return J.get(T);}});this.setAttributeConfig("direction",{value:M,validator:function(T){if(this._rendered){return false;}switch(T){case M:case C:case P:case I:return true;default:return false;}},method:function(T){this._barSizeFunction=this._barSizeFunctions[this.get("anim")?1:0][T];}});this.setAttributeConfig("maxValue",{value:100,validator:K.isNumber,method:function(T){this.get("element").setAttribute("aria-valuemax",T);if(this.get("value")>T){this.set("value",T);}}});this.setAttributeConfig("minValue",{value:0,validator:K.isNumber,method:function(T){this.get("element").setAttribute("aria-valuemin",T);if(this.get("value")<T){this.set("value",T);}}});this.setAttributeConfig("width",{getter:function(){return this.getStyle("width");},method:this._widthChange});this.setAttributeConfig("height",{getter:function(){return this.getStyle("height");},method:this._heightChange});this.setAttributeConfig("textTemplate",{value:"{value}"});this.setAttributeConfig("value",{value:0,validator:function(T){return K.isNumber(T)&&T>=this.get("minValue")&&T<=this.get("maxValue");},method:this._valueChange});this.setAttributeConfig("anim",{validator:function(T){return !!YAHOO.util.Anim;},setter:this._animSetter});},render:function(R,S){if(this._rendered){return;}this._rendered=true;var T=this.get("direction");this.addClass(B);this.addClass(B+"-"+T);var Q=this.get("element");Q.tabIndex=0;Q.setAttribute("role","progressbar");Q.setAttribute("aria-valuemin",this.get("minValue"));Q.setAttribute("aria-valuemax",this.get("maxValue"));this.appendTo(R,S);this._barSizeFunction=this._barSizeFunctions[0][T];this.redraw();this._fixEdges();if(this.get("anim")){this._barSizeFunction=this._barSizeFunctions[1][T];}this.on("minValueChange",this.redraw);this.on("maxValueChange",this.redraw);return this;},redraw:function(){this._recalculateConstants();this._valueChange(this.get("value"));},destroy:function(){this.set("anim",false);this.unsubscribeAll();this.get("captionEl").innerHTML="";var Q=this.get("element");Q.parentNode.removeChild(Q);},_previousValue:0,_barSpace:100,_barFactor:1,_rendered:false,_barSizeFunctions:[{ltr:function(T,Q,R,S){J.setStyle(R,"width",Q+"px");this.fireEvent("progress",T);this.fireEvent("complete",T);},rtl:function(T,Q,R,S){J.setStyle(R,"width",Q+"px");J.setStyle(R,"left",(this._barSpace-Q)+"px");this.fireEvent("progress",T);this.fireEvent("complete",T);},ttb:function(T,Q,R,S){J.setStyle(R,"height",Q+"px");this.fireEvent("progress",T);this.fireEvent("complete",T);},btt:function(T,Q,R,S){J.setStyle(R,"height",Q+"px");J.setStyle(R,"top",(this._barSpace-Q)+"px");this.fireEvent("progress",T);this.fireEvent("complete",T);}},{ltr:function(T,Q,R,S){if(S.isAnimated()){S.stop();}J.addClass(R,G);this._tweenFactor=(T-this._previousValue)/S.totalFrames;S.attributes={width:{to:Q}};S.animate();},rtl:function(T,Q,R,S){if(S.isAnimated()){S.stop();}J.addClass(R,G);this._tweenFactor=(T-this._previousValue)/S.totalFrames;S.attributes={width:{to:Q},left:{to:this._barSpace-Q}};S.animate();},ttb:function(T,Q,R,S){if(S.isAnimated()){S.stop();}J.addClass(R,G);this._tweenFactor=(T-this._previousValue)/S.totalFrames;S.attributes={height:{to:Q}};S.animate();},btt:function(T,Q,R,S){if(S.isAnimated()){S.stop();}J.addClass(R,G);this._tweenFactor=(T-this._previousValue)/S.totalFrames;S.attributes={height:{to:Q},top:{to:this._barSpace-Q}};S.animate();}}],_barSizeFunction:null,_heightChange:function(Q){if(K.isNumber(Q)){Q+="px";}this.setStyle("height",Q);this._fixEdges();this.redraw();},_widthChange:function(Q){if(K.isNumber(Q)){Q+="px";}this.setStyle("width",Q);this._fixEdges();this.redraw();},_fixEdges:function(){if(!this._rendered||YAHOO.env.ua.ie||YAHOO.env.ua.gecko){return;}var T=this.get("maskEl"),V=J.getElementsByClassName(F,undefined,T)[0],S=J.getElementsByClassName(A,undefined,T)[0],U=J.getElementsByClassName(L,undefined,T)[0],R=J.getElementsByClassName(E,undefined,T)[0],Q=(parseInt(J.getStyle(T,"height"),10)-parseInt(J.getStyle(V,"height"),10))+"px";J.setStyle(U,"height",Q);J.setStyle(R,"height",Q);Q=(parseInt(J.getStyle(T,"width"),10)-parseInt(J.getStyle(V,"width"),10))+"px";J.setStyle(S,"width",Q);J.setStyle(R,"width",Q);},_recalculateConstants:function(){var Q=this.get("barEl");this._mn=this.get("minValue")||0;switch(this.get("direction")){case M:case C:this._barSpace=parseInt(this.get("width"),10)-(parseInt(J.getStyle(Q,"marginLeft"),10)||0)-(parseInt(J.getStyle(Q,"marginRight"),10)||0);break;case P:case I:this._barSpace=parseInt(this.get("height"),10)-(parseInt(J.getStyle(Q,"marginTop"),10)||0)-(parseInt(J.getStyle(Q,"marginBottom"),10)||0);break;}this._barFactor=this._barSpace/(this.get("maxValue")-this._mn)||1;},_animSetter:function(S){var R,Q=this.get("barEl");if(S){if(S instanceof YAHOO.util.Anim){R=S;}else{R=new YAHOO.util.Anim(Q);}R.onTween.subscribe(this._animOnTween,this,true);R.onComplete.subscribe(this._animComplete,this,true);
}else{R=this.get("anim");if(R){R.onTween.unsubscribeAll();R.onComplete.unsubscribeAll();}R=null;}this._barSizeFunction=this._barSizeFunctions[R?1:0][this.get("direction")];return R;},_animComplete:function(Q){var R=this.get("value");this._previousValue=R;this.fireEvent("complete",R);J.removeClass(this.get("barEl"),G);this._showTemplates(R,true);},_animOnTween:function(Q){var R=Math.floor(this._tweenFactor*this.get("anim").currentFrame+this._previousValue);this.fireEvent("progress",R);this._showTemplates(R,false);},_valueChange:function(T){var S=this.get("anim"),Q=Math.floor((T-this._mn)*this._barFactor),R=this.get("barEl");this._showTemplates(T,true);if(this._rendered){this.fireEvent("start",this._previousValue);this._barSizeFunction(T,Q,R,S);}},_showTemplates:function(T,R){var S=this.get("captionEl"),Q=this.get("element"),U=K.substitute(this.get("textTemplate"),{value:T,minValue:this.get("minValue"),maxValue:this.get("maxValue")});if(S){S.innerHTML=U;}if(R){Q.setAttribute("aria-valuenow",T);Q.setAttribute("aria-valuetext",S.textContent);}}});})();YAHOO.register("progressbar",YAHOO.widget.ProgressBar,{version:"@VERSION@",build:"@BUILD@"});